<!doctype html>
<!--
  CYD RGB LED Matrix (HUB75) Retro Clock - Web Interface

  Features:
  - Live display mirror (64√ó32 RGB LED Matrix HUB75 visualization)
  - Comprehensive system diagnostics panel (includes firmware version)
  - Instant auto-apply configuration
  - Timezone dropdown (88 timezones across 13 regions)
  - NTP server dropdown (9 preset servers)
  - Date format selection (5 formats)
  - Debug level adjustment (runtime)
  - Contact footer with GitHub and Bluesky links
-->
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>CYD Retro Clock</title>
  <link rel="stylesheet" href="/style.css">
</head>
<body>
  <header>
    <h1>CYD RGB LED Matrix (HUB75) Retro Clock</h1>
    <div class="sub">Web status + display mirror</div>
  </header>

  <main>
    <section class="card">
      <h2>Display mirror</h2>
      <canvas id="mirror" width="320" height="240" style="border: 1px solid #444;"></canvas>
      <div class="hint">Live framebuffer from the 64√ó32 LED matrix clock display</div>
    </section>

    <section class="card">
      <h2>Config</h2>
      <div class="grid">
        <label>Timezone
          <select id="tz">
            <option value="">Loading timezones...</option>
          </select>
        </label>
        <label>NTP server
          <select id="ntp">
            <option value="pool.ntp.org">Global Pool (pool.ntp.org)</option>
            <option value="time.google.com">Google (time.google.com)</option>
            <option value="time.cloudflare.com">Cloudflare (time.cloudflare.com)</option>
            <option value="time.apple.com">Apple (time.apple.com)</option>
            <option value="time.windows.com">Microsoft (time.windows.com)</option>
            <option value="au.pool.ntp.org">Australia (au.pool.ntp.org)</option>
            <option value="us.pool.ntp.org">USA (us.pool.ntp.org)</option>
            <option value="europe.pool.ntp.org">Europe (europe.pool.ntp.org)</option>
            <option value="asia.pool.ntp.org">Asia (asia.pool.ntp.org)</option>
          </select>
        </label>
        <label>24-hour time
          <select id="use24h">
            <option value="true">24h</option>
            <option value="false">12h</option>
          </select>
        </label>
        <label>Date format
          <select id="dateFormat">
            <option value="0">YYYY-MM-DD</option>
            <option value="1">DD/MM/YYYY</option>
            <option value="2">MM/DD/YYYY</option>
            <option value="3">DD.MM.YYYY</option>
            <option value="4">Mon DD, YYYY</option>
          </select>
        </label>
        <label>Temperature unit
          <select id="useFahrenheit">
            <option value="false">Celsius (¬∞C)</option>
            <option value="true">Fahrenheit (¬∞F)</option>
          </select>
        </label>

        <label>LED diameter (px)
          <input id="ledd" type="number" min="1" max="10">
        </label>
        <label>LED gap (px)
          <input id="ledg" type="number" min="0" max="8">
        </label>
        <label>LED color
          <input id="col" type="color" value="#ff0000">
        </label>
        <label>Brightness (0-255)
          <input id="bl" type="number" min="0" max="255">
        </label>

        <div style="margin-top: 12px; padding-top: 12px; border-top: 1px solid #1b2330; display: flex; flex-direction: column; gap: 8px;">
          <button id="flipBtn" style="width: 100%; padding: 10px; font-size: 14px; background: #1a3a52; border: 1px solid #2a5a82; color: #8ef1ff; cursor: pointer; border-radius: 6px; transition: all 0.2s;">
            üîÑ Flip Display
          </button>
          <button id="resetWifiBtn" style="width: 100%; padding: 10px; font-size: 14px; background: #521a1a; border: 1px solid #822a2a; color: #ffb3b3; cursor: pointer; border-radius: 6px; transition: all 0.2s;">
            üì∂ Reset WiFi
          </button>
        </div>
      </div>

      <button id="save">Save Now</button>
      <div id="msg" class="msg">Changes apply instantly</div>
    </section>

    <section class="card">
      <h2>System Status & Diagnostics</h2>
      <div class="status-grid">
        <div class="status-section">
          <h3>Time & Network</h3>
          <div class="status-item"><span class="k">Time</span> <span id="time">--:--:--</span></div>
          <div class="status-item"><span class="k">Date</span> <span id="date">----</span></div>
          <div class="status-item"><span class="k">WiFi</span> <span id="wifi">--</span></div>
          <div class="status-item"><span class="k">IP Address</span> <span id="ip">--</span></div>
        </div>

        <div class="status-section">
          <h3>Environment</h3>
          <div class="status-item"><span class="k">Temperature</span> <span id="temperature">--</span></div>
          <div class="status-item"><span class="k">Humidity</span> <span id="humidity">--</span></div>
          <div class="status-item"><span class="k">Sensor</span> <span id="sensorType">--</span></div>
        </div>

        <div class="status-section">
          <h3>Hardware</h3>
          <div class="status-item"><span class="k">Board</span> <span id="board">--</span></div>
          <div class="status-item"><span class="k">Display</span> <span id="display">--</span></div>
          <div class="status-item"><span class="k">Sensors</span> <span id="sensors">--</span></div>
          <div class="status-item"><span class="k">Firmware</span> <span id="firmware">--</span></div>
          <div class="status-item"><span class="k">OTA Status</span> <span id="ota">--</span></div>
        </div>

        <div class="status-section">
          <h3>System Resources</h3>
          <div class="status-item"><span class="k">Uptime</span> <span id="uptime">--</span></div>
          <div class="status-item"><span class="k">Free Heap</span> <span id="freeHeap">--</span></div>
          <div class="status-item"><span class="k">Heap Usage</span> <span id="heapUsage">--</span></div>
          <div class="status-item"><span class="k">CPU Freq</span> <span id="cpuFreq">240 MHz</span></div>
        </div>

        <div class="status-section">
          <h3>Debug Settings</h3>
          <label class="inline-label">
            <span class="k">Debug Level</span>
            <select id="debugLevel" class="compact-select">
              <option value="0">Off</option>
              <option value="1">Error</option>
              <option value="2">Warning</option>
              <option value="3">Info</option>
              <option value="4">Verbose</option>
            </select>
          </label>
          <div class="status-item"><span class="k">Log Output</span> <span>Serial @ 115200</span></div>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="footer-content">
      <div class="footer-links">
        <a href="https://github.com/anthonyjclarke/CYD-LED-Matrix-Retro-Clock" target="_blank" rel="noopener noreferrer" class="footer-link">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
            <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"/>
          </svg>
          GitHub
        </a>
        <span class="footer-separator">‚Ä¢</span>
        <a href="https://bsky.app/profile/anthonyjclarke.bsky.social" target="_blank" rel="noopener noreferrer" class="footer-link">
          <svg width="16" height="16" viewBox="0 0 600 530" fill="currentColor">
            <path d="m135.72 44.03c66.496 49.921 138.02 151.14 164.28 205.46 26.262-54.316 97.782-155.54 164.28-205.46 47.98-36.021 125.72-63.892 125.72 24.795 0 17.712-10.155 148.79-16.111 170.07-20.703 73.984-96.144 92.854-163.25 81.433 117.3 19.964 147.14 86.092 82.697 152.22-122.39 125.59-175.91-31.511-189.63-71.766-2.514-7.3797-3.6904-10.832-3.7077-7.8964-0.0174-2.9357-1.1937 0.51669-3.7077 7.8964-13.714 40.255-67.233 197.36-189.63 71.766-64.444-66.128-34.605-132.26 82.697-152.22-67.108 11.421-142.55-7.4491-163.25-81.433-5.9562-21.282-16.111-152.36-16.111-170.07 0-88.687 77.742-60.816 125.72-24.795z"/>
          </svg>
          Bluesky
        </a>
      </div>
      <div class="footer-credit">
        Built with ‚ù§Ô∏è by Anthony Clarke with help from Claude.ai
      </div>
    </div>
  </footer>

  <script src="/app.js"></script>
</body>
</html>
